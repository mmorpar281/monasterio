<?php
// Definir las salas y su contenido
$salas = [
    'entrada' => [
        'nombre' => '1.Sala de Entrada',
        'descripcion' => [
            'es' => "Los dos cuadros de esta sala están pintados por Juan Manuel Nuñez,nacido en La Palma del Condado(Huelva), representan al Papa San Juan Pablo II, coronando a la Virgen de los Milagros en el año 1993, con motivo de cumplirse los 500 años de la Evangelización e el Nuevo Mundo. El otro cuadro representa la conversión de San Francisco de Asís, fundador de la Orden Franciscana; ambos cuadros se pintaron el año 2012, al cumplirse los 600 años de la Fundación del Monasterio(año 1412).",
            'en' => "The two paintings in this room were painted by Juan Manuel Nuñez, born in La Palma del Condado (Huelva). They depict Pope Saint John Paul II crowning the Virgin of Miracles in 1993, to commemorate the 500th anniversary of the Evangelization of the New World. The other painting depicts the conversion of Saint Francis of Assisi, founder of the Franciscan Order. Both were painted in 2012, to mark the 600th anniversary of the founding of the Monastery (1412).",
            'fr' => "Les deux tableaux de cette salle sont peints par Juan Manuel Nuñez, né à La Palma del Condado (Huelva), ils représentent le pape Saint Jean-Paul II, couronnant la Vierge des Miracles en 1993, à l'occasion du 500e anniversaire de l'évangélisation du Nouveau Monde. L'autre tableau représente la conversion de saint François d'Assise, fondateur de l'Ordre franciscain ; Les deux tableaux ont été peints en 2012, à l'occasion du 600e anniversaire de la fondation du monastère (année 1412).",
            'de' => "Die beiden Gemälde in diesem Raum wurden von Juan Manuel Nuñez gemalt, der in La Palma del Condado (Huelva) geboren wurde. Sie stellen den Heiligen Papst Johannes Paul II. dar, der 1993 anlässlich des 500. Jahrestages der Evangelisierung der Neuen Welt die Jungfrau der Wunder krönte. Das andere Gemälde stellt die Bekehrung des Heiligen Franz von Assisi, dem Gründer des Franziskanerordens, dar; Beide Gemälde wurden im Jahr 2012, zum 600. Jahrestag der Gründung des Klosters (Jahr 1412), gemalt.",
            'it' => "I due dipinti di questa sala sono dipinti da Juan Manuel Nuñez, nato a La Palma del Condado (Huelva), rappresentano Papa San Giovanni Paolo II, che incorona la Vergine dei Miracoli nel 1993, in occasione del 500° anniversario dell'Evangelizzazione del Nuovo Mondo. L'altro dipinto rappresenta la conversione di San Francesco d'Assisi, fondatore dell'Ordine francescano; Entrambi i dipinti sono stati dipinti nel 2012, nel 600° anniversario della fondazione del Monastero (anno 1412).",
            'pt' => "As duas pinturas desta sala são da autoria de Juan Manuel Nuñez, natural de La Palma del Condado (Huelva), e representam o Papa São João Paulo II, coroando a Virgem dos Milagres em 1993, por ocasião do 500º aniversário da Evangelização do Novo Mundo. A outra pintura representa a conversão de São Francisco de Assis, fundador da Ordem Franciscana; Ambas as pinturas foram pintadas em 2012, no 600º aniversário da Fundação do Mosteiro (ano 1412)."
        ],
        'imagen' => 'img/imgSalaEntrada.png',
        'audio' => [
            'es' => 'audio/salaEntrada/audio_es.mp3',
            'en' => 'audio/salaEntrada/audio_en.mp3',
            'fr' => 'audio/salaEntrada/audio_fr.mp3',
            'de' => 'audio/salaEntrada/audio_de.mp3',
            'it' => 'audio/salaEntrada/audio_it.mp3',
            'pt' => 'audio/salaEntrada/audio_pt.mp3'
        ]
    ],
    'poema' => [
        'nombre' => '2.Poema al Descubrimiento',
        'descripcion' => [
            'es' => "Sala dedicada al Descubrimiento de América, pintada por Daniel Vázquez Díaz, nacido en Nerva(Huelva). La técnica es al fresco, e introduce el movimiento del cubismo en España. Al conjunto lo tituló Poema al Descubrimiento de América. Lo pintó entre 1929-1930. Lo componen CINCO MURALES.<br> 1.- El navegante y el fraile. <br> 2.- El pensamiento del navegante. <br> 3.- Las conversaciones de la Rábida. <br> 4.- Los heroicos marinos de Palos. <br> 5.- El mural de las Naves.<br> Esta pintura se puede considerar entre lo más representativo del muralismo del siglo XX.",
            'en' => "Room dedicated to the Discovery of America, painted by Daniel Vázquez Díaz, born in Nerva (Huelva). The technique is fresco, and introduces the cubism movement in Spain. He titled the set Poem to the Discovery of America. He painted it between 1929 and 1930. It is made up of FIVE MURALS.<br> 1.- The Navigator and the Friar. <br> 2.- The Navigator's Thought. <br> 3.- The Conversations of La Rábida. <br> 4.- The Heroic Sailors of Palos. <br> 5.- The Mural of the Ships.<br> This painting can be considered among the most representative of 20th century muralism.",
            'fr' => "Salle dédiée à la Découverte de l'Amérique, peinte par Daniel Vázquez Díaz, né à Nerva (Huelva). La technique est la fresque et introduit le mouvement du cubisme en Espagne. Il a intitulé tout le poème « La découverte de l’Amérique ». Il l'a peint entre 1929-1930. Il est composé de CINQ MURALES.<br> 1.- Le navigateur et le frère. <br> 2.- La pensée du navigateur. <br> 3.- Les conversations de Rábida. <br> 4.- Les marins héroïques de Palos. <br> 5.- La peinture murale des Nefs.<br> Cette peinture peut être considérée parmi les plus représentatives du muralisme du XXe siècle.",
            'de' => "Raum, der der Entdeckung Amerikas gewidmet ist, gemalt von Daniel Vázquez Díaz, geboren in Nerva (Huelva). Die Technik ist Fresko und stellt die Bewegung des Kubismus in Spanien vor. Er betitelte das ganze Gedicht mit der Entdeckung Amerikas. Er malte es zwischen 1929 und 1930. Es besteht aus FÜNF WANDBILDERN.<br> 1.- Der Seefahrer und der Mönch. <br> 2.- Der Gedanke des Navigators. <br> 3.- Die Rábida-Gespräche. <br> 4.- Die heldenhaften Seefahrer von Palos. <br> 5.- Das Wandgemälde der Kirchenschiffe.<br> Dieses Gemälde kann als eines der repräsentativsten Wandgemälde des 20. Jahrhunderts angesehen werden.",
            'it' => "Sala dedicata alla Scoperta dell'America, dipinta da Daniel Vázquez Díaz, nato a Nerva (Huelva). La tecnica è l'affresco e introduce il movimento del cubismo in Spagna. Ha intitolato l'intero poema alla scoperta dell'America. Lo dipinse tra il 1929 e il 1930. È composto da CINQUE MURALES.<br> 1.- Il navigatore e il frate. <br> 2.- Il pensiero del navigatore. <br> 3.- Le conversazioni di Rábida. <br> 4.- Gli eroici marinai di Palos. <br> 5.- Il murale delle navate.<br> Questo dipinto può essere considerato tra i più rappresentativi del muralismo del XX secolo.",
            'pt' => "Sala dedicada ao Descobrimento da América, pintada por Daniel Vázquez Díaz, natural de Nerva (Huelva). A técnica é o afresco e introduz o movimento cubista na Espanha. Ele intitulou todo o Poema à Descoberta da América. Ele pintou entre 1929-1930. É composto por CINCO MURAIS.<br> 1.- O navegador e o frade. <br> 2.- O pensamento do navegador. <br> 3.- As conversas da Rábida. <br> 4.- Os heróicos marinheiros de Palos. <br> 5.- O mural das Naves.<br> Esta pintura pode ser considerada uma das mais representativas do muralismo do século XX."
        ],
        'imagen' => 'img/imagen.png',
        'audio' => [
            'es' => 'audio/PoemaAlDescubrimiento/audio_es.mp3',
            'en' => 'audio/PoemaAlDescubrimiento/audio_en.mp3',
            'fr' => 'audio/PoemaAlDescubrimiento/audio_fr.mp3',
            'de' => 'audio/PoemaAlDescubrimiento/audio_de.mp3',
            'it' => 'audio/PoemaAlDescubrimiento/audio_it.mp3',
            'pt' => 'audio/PoemaAlDescubrimiento/audio_pt.mp3'
        ]
    ],
    'claustro' => [
        'nombre' => '3.Claustro de las Flores o de la Hospedería',
        'descripcion' => [
            'es' => "La arquitectura actual responde a la reconstrucción de finales del siglo XVIII, después de los estragos del seísmo. Era el espacio dedicado a la acogida de marineros en apuros. Lugar por tanto donde habitaría Colón en sus etapas de estancia en el mismo, así como de su hijo Diego, el Niñico que aqui deja al cuidado de los frailes desde 1485.",
            'en' => "The current architecture is the result of reconstruction at the end of the 18th century, after the devastation of the earthquake. It was the space dedicated to sheltering sailors in distress. Columbus lived here during his stay, as well as his son Diego, the little boy he left here in the care of the friars starting in 1485.",
            'fr' => "L'architecture actuelle répond à la reconstruction de la fin du XVIIIe siècle, après les ravages du tremblement de terre. C'était l'espace dédié à l'accueil des marins en détresse. Lieu donc où Colomb vivra pendant son séjour là-bas, ainsi que son fils Diego, le Petit Garçon qu'il laissa ici aux soins des frères depuis 1485.",
            'de' => "Die heutige Architektur ist eine Reaktion auf den Wiederaufbau Ende des 18. Jahrhunderts nach den verheerenden Folgen des Erdbebens. Es war der Raum, der der Aufnahme von Seeleuten in Seenot gewidmet war. Ort, an dem Kolumbus während seines Aufenthalts dort lebte, ebenso wie sein Sohn Diego, der kleine Junge, den er hier seit 1485 in der Obhut der Mönche zurückließ.",
            'it' => "L'architettura attuale risponde alla ricostruzione avvenuta alla fine del XVIII secolo, dopo le devastazioni del terremoto. Era lo spazio dedicato all'accoglienza dei marinai in difficoltà. Luogo quindi dove Colombo visse durante la sua permanenza, così come suo figlio Diego, il Ragazzino che qui lasciò alle cure dei frati dal 1485.",
            'pt' => "A arquitetura atual responde à reconstrução do final do século XVIII, após os estragos do terramoto. Era o espaço dedicado a acolher marinheiros em perigo. Local portanto onde viveria Colombo durante a sua estada ali, bem como o seu filho Diego, o Menino que aqui deixou aos cuidados dos frades desde 1485."
        ],
        'imagen' => 'img/claustro.png',
        'audio' => [
            'es' => 'audio/claustro/audio_es.mp3',
            'en' => 'audio/claustro/audio_en.mp3',
            'fr' => 'audio/claustro/audio_fr.mp3',
            'de' => 'audio/claustro/audio_de.mp3',
            'it' => 'audio/claustro/audio_it.mp3',
            'pt' => 'audio/claustro/audio_pt.mp3'
        ]
    ]
];

// Obtener la sala seleccionada y el idioma elegido
$salaSeleccionada = $_GET['sala'] ?? 'entrada'; // 'entrada' es la sala predeterminada
$idiomaSeleccionado = $_GET['idioma'] ?? 'es'; // 'es' es el idioma predeterminado

// Verificar que la sala seleccionada exista en el array
if (!array_key_exists($salaSeleccionada, $salas)) {
    $salaSeleccionada = 'entrada'; // Si no existe, usar la sala predeterminada
}

// Obtener la sala seleccionada
$sala = $salas[$salaSeleccionada];
$descripcion = $sala['descripcion'][$idiomaSeleccionado];
$audio = $sala['audio'][$idiomaSeleccionado]; // Audio en el idioma seleccionado

// Definir las claves del array de salas
$clavesSalas = array_keys($salas);
$indiceSala = array_search($salaSeleccionada, $clavesSalas);

// Determinar la siguiente y la anterior sala
$anteriorSala = ($indiceSala > 0) ? $clavesSalas[$indiceSala - 1] : null;
$siguienteSala = ($indiceSala < count($clavesSalas) - 1) ? $clavesSalas[$indiceSala + 1] : null;
?>

<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title><?php echo $sala['nombre']; ?> - Monasterio de Santa María la Rábida</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css" rel="stylesheet">
    <style>
        /* Estilos generales */
        body {
            margin: 0;
            font-family: Arial, sans-serif;
            display: flex;
            flex-direction: column;
            min-height: 100vh;
        }
        .header, .footer {
            background-color: #007bff; /* Azul */
            color: white;
            padding: 20px;
            text-align: center;
        }
        .header {
            display: flex;
            justify-content: space-between;
            align-items: center;
        }
        .logo {
            width: 80px;
            height: 80px;
            border-radius: 50%;
        }
        .main-content {
            flex: 1;
            background-color: white; /* Fondo blanco */
            padding: 20px;
            text-align: center; /* Centrar todo el contenido */
        }
        .dropdown-menu {
            min-width: 200px;
        }
        .dropdown-item {
            font-size: 1.2rem;
        }
        h1 {
            font-size: 2.5rem;
            margin: 0;
            flex-grow: 1;
            text-align: center; /* Centrar el título */
        }
        h2 {
            font-size: 2rem;
        }
        h4 {
            font-size: 1.5rem;
        }
        p, h5 {
            font-size: 1.2rem;
        }
        .descripcion-container {
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            text-align: center;
        }
        .descripcion-container img {
            max-width: 100%;
            height: auto;
            border-radius: 10px;
            margin-top: 20px;
        }
    </style>
</head>
<body>
    <!-- Cabecero -->
    <div class="header">
        <img src="img/logo.png" alt="Logotipo" class="logo">
        <h1>Monasterio de Santa María la Rábida</h1>
        <div class="dropdown">
            <button class="btn btn-outline-light dropdown-toggle" type="button" id="dropdownMenuButton" data-bs-toggle="dropdown" aria-expanded="false">
                <i class="fas fa-bars"></i>
            </button>
            <ul class="dropdown-menu" aria-labelledby="dropdownMenuButton">
                <?php foreach ($salas as $claveSala => $salaItem) { ?>
                    <li><a class="dropdown-item" href="?sala=<?php echo $claveSala; ?>&idioma=<?php echo $idiomaSeleccionado; ?>"><?php echo $salaItem['nombre']; ?></a></li>
                <?php } ?>
            </ul>
        </div>
    </div>

    <!-- Contenido principal -->
    <div class="main-content">
        <h4 class="text-secondary">Bienvenido al Santuario de la Hispanidad!</h4>
        <p class="fst-italic">Acepta nuestro saludo franciscano de <strong>PAZ y BIEN</strong></p>
        
        <h2 class="mt-4"><?php echo $sala['nombre']; ?></h2>
        <div class="descripcion-container">
            <p id="descripcion"><?php echo $descripcion; ?></p>
            <img id="imagen" src="<?php echo $sala['imagen']; ?>" alt="Imagen de la sala">
        </div>

        <!-- Botones de navegación -->
        <div class="d-flex justify-content-center gap-2 mt-4">
            <!-- Botón de Anterior -->
            <?php if ($anteriorSala): ?>
                <a href="?sala=<?php echo $anteriorSala; ?>&idioma=<?php echo $idiomaSeleccionado; ?>" class="btn btn-primary">
                    <i class="fas fa-arrow-left"></i>
                </a>
            <?php endif; ?>

            <!-- Botón de Reproducir/Pausar -->
            <button class="btn btn-success" id="playPauseBtn" onclick="reproducirAudio()">
                <i class="fas fa-play"></i>
            </button>

            <!-- Botón de Siguiente -->
            <?php if ($siguienteSala): ?>
                <a href="?sala=<?php echo $siguienteSala; ?>&idioma=<?php echo $idiomaSeleccionado; ?>" class="btn btn-primary">
                    <i class="fas fa-arrow-right"></i>
                </a>
            <?php endif; ?>
        </div>
    </div>

    <!-- Pie de página -->
    <div class="footer">
        <p>&copy; 2025 Monasterio de Santa María la Rábida</p>
    </div>

    <script>
        // Obtener el archivo de audio en el idioma seleccionado
        const audioFile = '<?php echo $audio; ?>';
        let audio = new Audio(audioFile);
        let isPlaying = false;

        function reproducirAudio() {
            if (isPlaying) {
                audio.pause();
                isPlaying = false;
                document.getElementById('playPauseBtn').innerHTML = '<i class="fas fa-play"></i>';
            } else {
                audio.play();
                isPlaying = true;
                document.getElementById('playPauseBtn').innerHTML = '<i class="fas fa-pause"></i>';
            }
        }
    </script>

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
</body>
</html>